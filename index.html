<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Health Assessment | SAMहित</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
        }

        .gradient-text {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .btn-orange {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            transition: all 0.3s ease;
        }

        .btn-orange:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.4);
        }

        .card-hover {
            transition: all 0.3s ease;
            border: 1px solid #2d2d2d;
        }

        .card-hover:hover {
            transform: translateY(-2px);
            border-color: #ff6b35;
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.1);
        }

        .progress-bar {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            transition: width 0.5s ease-in-out;
        }

        .option-card {
            transition: all 0.3s ease;
            background: #1a1a1a;
            border: 1px solid #2d2d2d;
        }

        .option-card:hover {
            border-color: #ff6b35;
            background: #262626;
            transform: translateY(-1px);
        }

        .result-card {
            background: linear-gradient(135deg, #1a1a1a 0%, #262626 100%);
            border: 1px solid #2d2d2d;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        .minimal {
            border-left: 4px solid #10b981;
        }

        .mild {
            border-left: 4px solid #f59e0b;
        }

        .moderate {
            border-left: 4px solid #f97316;
        }

        .severe {
            border-left: 4px solid #ef4444;
        }
    </style>
</head>

<body class="bg-black text-white">
    <!-- Navigation -->
    <nav class="bg-black/90 backdrop-blur-sm border-b border-gray-800 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <h1 class="text-xl sm:text-2xl font-bold gradient-text">SAMहित</h1>
                </div>
                <div class="hidden md:flex space-x-4 md:space-x-8">
                    <a href="#" class="text-white hover:text-orange-400 transition-colors">Overview</a>
                    <a href="#" class="text-white hover:text-orange-400 transition-colors">Features</a>
                    <a href="#" class="text-white hover:text-orange-400 transition-colors">Insights</a>
                    <a href="#" class="text-white hover:text-orange-400 transition-colors">Contact</a>
                </div>
                <button class="bg-white text-black px-4 py-2 md:px-6 md:py-2 rounded-full font-medium hover:bg-gray-100 transition-colors">
                    Get Started
                </button>
            </div>
        </div>
    </nav>

    <!-- Assessment Container -->
    <div class="min-h-screen py-8 sm:py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-4xl mx-auto">
            <!-- Header Section -->
            <div id="header-section" class="text-center mb-12 sm:mb-16 fade-in">
                <h1 class="text-4xl sm:text-5xl md:text-7xl font-black mb-6">
                    Mental Health
                    <span class="gradient-text block">Assessment</span>
                </h1>
                <p class="text-lg sm:text-xl text-gray-400 max-w-2xl mx-auto mb-8">
                    Early detection systems are proof that there's power in understanding minds before they break.
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                    <button id="start-btn" class="btn-orange w-full sm:w-auto px-8 py-4 rounded-full text-white font-semibold text-lg">
                        Start Assessment
                    </button>
                    <button id="learn-more-btn" class="w-full sm:w-auto text-white hover:text-orange-400 transition-colors flex items-center justify-center">
                        Learn More <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- Stats Section -->
            <div id="stats-section" class="grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 mb-12 sm:mb-16">
                <div class="text-center">
                    <div class="text-3xl sm:text-4xl md:text-5xl font-black gradient-text mb-2">95%</div>
                    <div class="text-gray-400 text-sm sm:text-base">Detection Rate</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl sm:text-4xl md:text-5xl font-black gradient-text mb-2">50K+</div>
                    <div class="text-gray-400 text-sm sm:text-base">People Helped</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl sm:text-4xl md:text-5xl font-black gradient-text mb-2">24/7</div>
                    <div class="text-gray-400 text-sm sm:text-base">AI Monitoring</div>
                </div>
            </div>

            <!-- Privacy & Security Notice -->
            <div id="privacy-section" class="bg-gray-900/50 border border-gray-700 rounded-2xl p-6 sm:p-8 mb-12 sm:mb-16">
                <div class="text-center mb-6">
                    <i class="fas fa-shield-alt text-3xl sm:text-4xl text-green-400 mb-4"></i>
                    <h3 class="text-xl sm:text-2xl font-bold text-white mb-2">Your Privacy is Protected</h3>
                    <p class="text-sm sm:text-base text-gray-400">We use advanced encryption and privacy measures to keep your data secure</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6">
                    <div class="text-center">
                        <i class="fas fa-lock text-xl sm:text-2xl text-green-400 mb-3"></i>
                        <h4 class="font-semibold text-white mb-2 text-sm sm:text-base">End-to-End Encryption</h4>
                        <p class="text-xs sm:text-sm text-gray-400">All responses are encrypted and never stored on our servers</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-user-secret text-xl sm:text-2xl text-green-400 mb-3"></i>
                        <h4 class="font-semibold text-white mb-2 text-sm sm:text-base">Anonymous Assessment</h4>
                        <p class="text-xs sm:text-sm text-gray-400">No personal information required to complete the assessment</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-trash-alt text-xl sm:text-2xl text-green-400 mb-3"></i>
                        <h4 class="font-semibold text-white mb-2 text-sm sm:text-base">Auto-Delete</h4>
                        <p class="text-xs sm:text-sm text-gray-400">Session data is automatically cleared after completion</p>
                    </div>
                </div>
            </div>

            <!-- Quiz Container -->
            <div id="quiz-container" class="hidden">
                <!-- Progress Bar -->
                <div class="mb-6 sm:mb-8">
                    <div class="flex justify-between items-center mb-3">
                        <span class="text-xs sm:text-sm text-gray-400">Progress</span>
                        <span id="progress-text" class="text-xs sm:text-sm text-gray-400">1 of 15</span>
                    </div>
                    <div class="w-full bg-gray-800 rounded-full h-2">
                        <div id="progress-bar" class="progress-bar h-2 rounded-full" style="width: 6.67%"></div>
                    </div>
                </div>

                <!-- Question Card -->
                <div id="question-card" class="card-hover bg-gray-900 rounded-2xl p-6 sm:p-8 mb-6 sm:mb-8 fade-in">
                    <h2 id="question-text" class="text-xl sm:text-2xl font-semibold mb-6 sm:mb-8 text-white"></h2>
                    <div id="options-container" class="space-y-4 sm:space-y-6"></div>
                </div>

                <!-- Navigation -->
                <div class="flex flex-col sm:flex-row justify-between items-center gap-4">
                    <button id="prev-btn" class="text-gray-400 hover:text-white transition-colors disabled:opacity-50" disabled>
                        <i class="fas fa-arrow-left mr-2"></i> Previous
                    </button>
                    <div class="text-xs sm:text-sm text-gray-500 text-center">
                        <i class="fas fa-shield-alt mr-2"></i>
                        Your responses are completely confidential
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div id="results-section" class="hidden">
                <div class="text-center mb-8 sm:mb-12">
                    <h2 class="text-3xl sm:text-4xl md:text-5xl font-black mb-4">Assessment Results</h2>
                    <p class="text-lg sm:text-xl text-gray-400">Your mental health screening analysis</p>
                </div>

                <div id="result-card" class="result-card rounded-2xl p-6 sm:p-8 mb-6 sm:mb-8">
                    <div class="flex items-center mb-6">
                        <div id="result-icon" class="text-3xl sm:text-4xl mr-4"></div>
                        <div>
                            <h3 id="result-level" class="text-2xl sm:text-3xl font-bold mb-2"></h3>
                            <p id="result-score" class="text-sm sm:text-base text-gray-400"></p>
                        </div>
                    </div>
                    <p id="result-message" class="text-base sm:text-lg mb-6 text-gray-300"></p>
                    <div class="bg-black/50 rounded-xl p-4 sm:p-6 mb-6">
                        <h4 class="font-semibold text-white mb-3 text-sm sm:text-base">
                            <i class="fas fa-lightbulb mr-2 text-orange-400"></i>
                            Recommendations:
                        </h4>
                        <p id="result-recommendation" class="text-gray-300 text-sm sm:text-base"></p>
                    </div>
                </div>

                <!-- Important Notice -->
                <div class="bg-blue-900/30 border border-blue-700/50 rounded-xl p-4 sm:p-6 mb-6 sm:mb-8">
                    <h4 class="font-semibold text-blue-300 mb-3 text-sm sm:text-base">
                        <i class="fas fa-info-circle mr-2"></i>
                        Important Notice:
                    </h4>
                    <p class="text-blue-200 text-xs sm:text-sm">
                        This assessment is for informational purposes only and is not a substitute for professional medical advice, diagnosis, or treatment. If you're experiencing thoughts of self-harm or suicide, please contact a crisis helpline or emergency services immediately.
                    </p>
                </div>

                <!-- Resources -->
                <div class="bg-gray-900 rounded-xl p-4 sm:p-6 mb-6 sm:mb-8">
                    <h4 class="font-semibold text-white mb-4 text-sm sm:text-base">
                        <i class="fas fa-hands-helping mr-2 text-orange-400"></i>
                        Crisis Resources:
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-xs sm:text-sm">
                        <div class="text-gray-300">
                            <strong>National Suicide Prevention Lifeline:</strong><br>
                            <a href="tel:988" class="text-orange-400 hover:text-orange-300">988</a>
                        </div>
                        <div class="text-gray-300">
                            <strong>Crisis Text Line:</strong><br>
                            Text HOME to <span class="text-orange-400">741741</span>
                        </div>
                        <div class="text-gray-300">
                            <strong>NAMI Helpline:</strong><br>
                            <a href="tel:1-800-950-6264" class="text-orange-400 hover:text-orange-300">1-800-950-NAMI (6264)</a>
                        </div>
                        <div class="text-gray-300">
                            <strong>Mental Health America:</strong><br>
                            <a href="https://mhanational.org" class="text-orange-400 hover:text-orange-300">mhanational.org</a>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="text-center space-y-4">
                    <button id="retake-btn" class="btn-orange w-full sm:w-auto px-8 py-4 rounded-full text-white font-semibold text-base sm:text-lg">
                        <i class="fas fa-redo mr-2"></i>
                        Take Assessment Again
                    </button>
                    <div>
                        <button id="download-btn" class="text-gray-400 hover:text-white transition-colors text-sm sm:text-base">
                            <i class="fas fa-download mr-2"></i>
                            Download Results
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Learn More Modal -->
    <div id="learn-more-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div class="bg-gray-900 rounded-2xl p-4 sm:p-8 max-w-full sm:max-w-2xl w-full mx-4 overflow-y-auto max-h-[90vh]">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl sm:text-3xl font-bold text-white">About the Assessment</h2>
                <button id="close-modal" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="space-y-6 text-gray-300">
                <p class="text-sm sm:text-base">
                    The Mental Health Assessment by SAMहित is a scientifically designed tool to help individuals understand their current mental health status. It evaluates symptoms related to depression, anxiety, cognitive function, and social behavior.
                </p>
                <h3 class="text-lg sm:text-xl font-semibold text-white">Key Features:</h3>
                <ul class="list-disc list-inside space-y-1 sm:space-y-2 text-sm sm:text-base">
                    <li>Based on clinically validated questionnaires</li>
                    <li>Anonymous and confidential</li>
                    <li>Provides immediate results and recommendations</li>
                    <li>Helps in early detection of potential mental health issues</li>
                </ul>
                <h3 class="text-lg sm:text-xl font-semibold text-white">How It Works:</h3>
                <ol class="list-decimal list-inside space-y-1 sm:space-y-2 text-sm sm:text-base">
                    <li>Answer 15 carefully selected questions</li>
                    <li>Receive an immediate analysis of your responses</li>
                    <li>Get personalized recommendations based on your score</li>
                    <li>Access resources for further support if needed</li>
                </ol>
                <p class="text-sm sm:text-base">
                    Remember, this assessment is not a diagnostic tool but a screening instrument. It's designed to provide insights and guide you towards appropriate resources or professional help if necessary.
                </p>
                <div class="bg-blue-900/30 border border-blue-700/50 rounded-xl p-4">
                    <h4 class="font-semibold text-blue-300 mb-2 text-sm sm:text-base">
                        <i class="fas fa-info-circle mr-2"></i>
                        Privacy Note:
                    </h4>
                    <p class="text-blue-200 text-xs sm:text-sm">
                        Your responses are processed locally in your browser and are not stored or transmitted to any server. We prioritize your privacy and confidentiality.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Quiz Data
        const questions = [
            {
                id: 1,
                question: "Over the past two weeks, how often have you felt down, depressed, or hopeless?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                id: 2,
                question: "How often have you had little interest or pleasure in doing things?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                id: 3,
                question: "How often have you had trouble falling or staying asleep, or sleeping too much?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                id: 4,
                question: "How often have you felt tired or had little energy?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                id: 5,
                question: "How often have you had poor appetite or overeating?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                id: 6,
                question: "How often have you felt bad about yourself or that you are a failure?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                id: 7,
                question: "How often have you had trouble concentrating on things like reading or watching TV?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                id: 8,
                question: "How often have you felt anxious, nervous, or on edge?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                id: 9,
                question: "How often have you been unable to stop or control worrying?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                id: 10,
                question: "How often have you felt restless or found it hard to sit still?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                id: 11,
                question: "How often have you felt irritable or easily annoyed?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                id: 12,
                question: "How often have you felt afraid that something awful might happen?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                id: 13,
                question: "How often have you had difficulty making decisions?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                id: 14,
                question: "How often have you avoided social situations or activities?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                id: 15,
                question: "How often have you had thoughts that you would be better off dead or of hurting yourself?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            }
        ];

        // Question categories for better analysis
        const questionCategories = {
            depression: [0, 1, 2, 3, 4, 5, 6, 14], // Questions 1-7, 15
            anxiety: [7, 8, 9, 10, 11], // Questions 8-12
            cognitive: [6, 12], // Questions 7, 13
            social: [13] // Question 14
        };

        // Enhanced scoring system
        function calculateCategoryScores() {
            const categoryScores = {};
            Object.keys(questionCategories).forEach(category => {
                const questionIndices = questionCategories[category];
                const totalScore = questionIndices.reduce((sum, index) => {
                    return sum + (answers[index] || 0);
                }, 0);
                const maxScore = questionIndices.length * 3;
                categoryScores[category] = {
                    score: totalScore,
                    percentage: (totalScore / maxScore) * 100
                };
            });
            return categoryScores;
        }

        // Quiz State
        let currentQuestion = 0;
        let answers = {};
        let totalScore = 0;
        let resultData = {};

        // DOM Elements
        const headerSection = document.getElementById('header-section');
        const statsSection = document.getElementById('stats-section');
        const quizContainer = document.getElementById('quiz-container');
        const resultsSection = document.getElementById('results-section');
        const startBtn = document.getElementById('start-btn');
        const learnMoreBtn = document.getElementById('learn-more-btn');
        const closeModalBtn = document.getElementById('close-modal');
        const modal = document.getElementById('learn-more-modal');
        const retakeBtn = document.getElementById('retake-btn');
        const downloadBtn = document.getElementById('download-btn');
        const prevBtn = document.getElementById('prev-btn');

        // Event Listeners
        startBtn.addEventListener('click', startQuiz);
        learnMoreBtn.addEventListener('click', showModal);
        closeModalBtn.addEventListener('click', hideModal);
        retakeBtn.addEventListener('click', resetQuiz);
        downloadBtn.addEventListener('click', downloadResults);
        prevBtn.addEventListener('click', goToPreviousQuestion);

        function showModal() {
            modal.classList.remove('hidden');
        }

        function hideModal() {
            modal.classList.add('hidden');
        }

        function startQuiz() {
            headerSection.classList.add('hidden');
            statsSection.classList.add('hidden');
            document.getElementById('privacy-section').classList.add('hidden');
            quizContainer.classList.remove('hidden');
            quizContainer.classList.add('fade-in');
            window.scrollTo({ top: 0, behavior: 'smooth' });
            loadQuestion();
        }

        function loadQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('question-text').textContent = question.question;
            document.getElementById('progress-text').textContent = `${currentQuestion + 1} of ${questions.length}`;
            const progressPercentage = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progressPercentage}%`;
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('button');
                optionElement.className = 'option-card w-full text-left p-4 sm:p-6 rounded-xl cursor-pointer';
                const isSelected = answers[currentQuestion] === option.score;
                optionElement.innerHTML = `
                    <div class="flex items-center">
                        <div class="w-4 h-4 border-2 ${isSelected ? 'border-orange-500' : 'border-gray-600'} rounded-full mr-4 relative">
                            ${isSelected ? '<div class="absolute inset-0 bg-orange-500 rounded-full m-1"></div>' : ''}
                        </div>
                        <span class="text-white text-sm sm:text-base">${option.text}</span>
                    </div>
                `;
                optionElement.addEventListener('click', () => selectAnswer(option.score));
                optionsContainer.appendChild(optionElement);
            });
            prevBtn.disabled = (currentQuestion === 0);
            document.getElementById('question-card').classList.remove('fade-in');
            setTimeout(() => {
                document.getElementById('question-card').classList.add('fade-in');
            }, 10);
        }

        function selectAnswer(score) {
            answers[currentQuestion] = score;
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                setTimeout(loadQuestion, 300);
            } else {
                calculateAndShowResults();
            }
        }

        function goToPreviousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
            }
        }

        function calculateAndShowResults() {
            totalScore = Object.values(answers).reduce((sum, score) => sum + score, 0);
            quizContainer.classList.add('hidden');
            resultsSection.classList.remove('hidden');
            displayResults();
        }

        function displayResults() {
            const resultCard = document.getElementById('result-card');
            const categoryScores = calculateCategoryScores();
            if (totalScore <= 10) {
                resultData = {
                    level: "Minimal Symptoms",
                    icon: "fas fa-check-circle text-green-400",
                    className: "minimal",
                    message: "Your responses suggest minimal signs of depression or anxiety. You appear to be managing well mentally.",
                    recommendation: "Continue maintaining healthy habits like regular exercise, good sleep, and social connections. Consider mindfulness practices to maintain your mental wellness.",
                    color: "green"
                };
            } else if (totalScore <= 20) {
                resultData = {
                    level: "Mild Symptoms",
                    icon: "fas fa-exclamation-triangle text-yellow-400",
                    className: "mild",
                    message: "Your responses suggest mild symptoms that may benefit from attention and self-care strategies.",
                    recommendation: "Consider implementing stress-reduction techniques, regular exercise, and mindfulness practices. Monitor your symptoms and consider speaking with a healthcare provider if they persist.",
                    color: "yellow"
                };
            } else if (totalScore <= 30) {
                resultData = {
                    level: "Moderate Symptoms",
                    icon: "fas fa-exclamation-circle text-orange-400",
                    className: "moderate",
                    message: "Your responses suggest moderate symptoms that may be impacting your daily life.",
                    recommendation: "It's recommended to speak with a healthcare provider, counselor, or therapist. Support groups and professional guidance can be very helpful at this stage.",
                    color: "orange"
                };
            } else {
                resultData = {
                    level: "Severe Symptoms",
                    icon: "fas fa-exclamation-triangle text-red-400",
                    className: "severe",
                    message: "Your responses suggest significant symptoms that likely require professional attention.",
                    recommendation: "It's important to reach out to a mental health professional, your doctor, or a crisis helpline for immediate support and guidance. Please don't wait to seek help.",
                    color: "red"
                };
            }
            resultCard.className = `result-card rounded-2xl p-6 sm:p-8 mb-6 sm:mb-8 ${resultData.className}`;
            document.getElementById('result-icon').className = resultData.icon;
            document.getElementById('result-level').textContent = resultData.level;
            document.getElementById('result-score').textContent = `Total Score: ${totalScore}/45 (${((totalScore / 45) * 100).toFixed(1)}%)`;
            document.getElementById('result-message').textContent = resultData.message;
            document.getElementById('result-recommendation').textContent = resultData.recommendation;
            addCategoryBreakdown(categoryScores);
            resultsSection.classList.add('fade-in');
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }

        function addCategoryBreakdown(categoryScores) {
            let breakdownSection = document.getElementById('category-breakdown');
            if (!breakdownSection) {
                breakdownSection = document.createElement('div');
                breakdownSection.id = 'category-breakdown';
                breakdownSection.className = 'bg-black/30 rounded-xl p-4 sm:p-6 mb-6';
                const resultCard = document.getElementById('result-card');
                resultCard.parentNode.insertBefore(breakdownSection, resultCard.nextSibling);
            }
            breakdownSection.innerHTML = `
                <h4 class="font-semibold text-white mb-4 text-sm sm:text-base">
                    <i class="fas fa-chart-bar mr-2 text-orange-400"></i>
                    Detailed Breakdown:
                </h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    ${Object.entries(categoryScores).map(([category, data]) => {
                        const categoryName = category.charAt(0).toUpperCase() + category.slice(1);
                        const colorClass = data.percentage > 66 ? 'text-red-400' : data.percentage > 33 ? 'text-yellow-400' : 'text-green-400';
                        return `
                            <div class="bg-gray-800/50 rounded-lg p-4">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-gray-300 font-medium text-sm sm:text-base">${categoryName}</span>
                                    <span class="${colorClass} font-bold text-sm sm:text-base">${data.percentage.toFixed(0)}%</span>
                                </div>
                                <div class="w-full bg-gray-700 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-orange-500 to-orange-400 h-2 rounded-full transition-all duration-500" 
                                         style="width: ${data.percentage}%"></div>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        function downloadResults() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const pageWidth = doc.internal.pageSize.width;
            const pageHeight = doc.internal.pageSize.height;
            let yPosition = 20;
            const margin = 20;
            const maxWidth = pageWidth - 2 * margin;

            function addText(text, x, y, options = {}) {
                const fontSize = options.fontSize || 12;
                doc.setFontSize(fontSize);
                doc.setFont("helvetica", options.fontStyle || "normal");
                const lines = doc.splitTextToSize(text, maxWidth);
                let lineY = y;
                lines.forEach((line, index) => {
                    if (lineY + 10 > pageHeight - margin) {
                        doc.addPage();
                        lineY = margin;
                    }
                    doc.text(line, x, lineY, { align: options.align || "left" });
                    lineY += 7;
                });
                return lineY;
            }

            yPosition = addText("Mental Health Assessment Results", pageWidth / 2, yPosition, { fontSize: 16, align: "center" });
            yPosition = addText("SAMHIT", pageWidth / 2, yPosition, { align: "center" });
            yPosition += 10;
            const currentDate = new Date().toLocaleString();
            yPosition = addText(`Date: ${currentDate}`, margin, yPosition);
            yPosition += 10;
            yPosition = addText("Result Summary", margin, yPosition, { fontSize: 14, fontStyle: "bold" });
            yPosition = addText(`Level: ${resultData.level}`, margin, yPosition);
            yPosition = addText(`Score: ${totalScore}/45 (${((totalScore / 45) * 100).toFixed(1)}%)`, margin, yPosition);
            yPosition += 10;
            const categoryScores = calculateCategoryScores();
            yPosition = addText("Category Breakdown", margin, yPosition, { fontSize: 14, fontStyle: "bold" });
            Object.entries(categoryScores).forEach(([category, data]) => {
                const categoryName = category.charAt(0).toUpperCase() + category.slice(1);
                yPosition = addText(`${categoryName}: ${data.percentage.toFixed(0)}%`, margin, yPosition);
            });
            yPosition += 10;
            yPosition = addText("Interpretation", margin, yPosition, { fontSize: 14, fontStyle: "bold" });
            yPosition = addText(resultData.message, margin, yPosition);
            yPosition += 10;
            yPosition = addText("Recommendations", margin, yPosition, { fontSize: 14, fontStyle: "bold" });
            yPosition = addText(resultData.recommendation, margin, yPosition);
            yPosition += 10;
            const pageCount = doc.internal.getNumberOfPages();
            for (let i = 1; i <= pageCount; i++) {
                doc.setPage(i);
                doc.setFontSize(10);
                doc.text(`Page ${i} of ${pageCount}`, pageWidth / 2, pageHeight - 10, { align: "center" });
            }
            doc.save(`Assessment_Results_${new Date().toISOString().split('T')[0]}.pdf`);
        }

        function resetQuiz() {
            currentQuestion = 0;
            answers = {};
            totalScore = 0;
            resultData = {};
            const breakdown = document.getElementById('category-breakdown');
            if (breakdown) {
                breakdown.remove();
            }
            resultsSection.classList.add('hidden');
            headerSection.classList.remove('hidden');
            statsSection.classList.remove('hidden');
            document.getElementById('privacy-section').classList.remove('hidden');
            document.getElementById('progress-bar').style.width = '6.67%';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>

</html>
